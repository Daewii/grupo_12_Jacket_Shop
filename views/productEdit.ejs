<!DOCTYPE html>
<html lang="en">

<%- include("partials/head", {title: 'Editando: ' + product.name})%>
    <%- include("partials/header")%>

        <body>
            <h1 class="titleAddProduct">Editar producto: <i>
                    <%= product.name %>
                </i></h1>
            <br>
            <section class="formProductAdd">
                <form action="/products/<%=product.id%>?_method=PUT" method="post">
                    <label for="name">Nombre: </label>
                    <p><input type="text" name="name" id="" value="<%=product.name%>"><span></span></p>
                    <% if (locals.errors && errors.name) { %>
                        <div class="validation">
                            <%= errors.name.msg %> 
                        </div>
                    <% } %>
                    <label for="description">Descripción: </label>
                    <p><input type="text" name="description" id="" value="<%=product.description%>"><span></span></p>
                    <% if (locals.errors && errors.description) { %>
                        <div class="validation">
                            <%= errors.description.msg %> 
                        </div>
                        <% } %>
                        <label for="price">Precio: </label>
                        <div><input type="number" name="price" id="price" value="<%=product.price%>"><span></span></div>
                        <% if (locals.errors && errors.price) { %>
                            <div class="validation">
                                <%= errors.price.msg %> 
                            </div>
                        <% } %>
                    <div>
                        <label for="category_id">Categoría: </label>
                    <select name="category_id">
                        <option selected disabled>Elige la categoría -</option>
                    <% categories.forEach(category => { %>
                        <option value="<%= category.id %>" <%= category.id == product.category_id ? 'selected' : ''; %>><%= category.category %></option>
                    <% }) %>
                    </select><span></span>
                </div>
                <% if (locals.errors && errors.category_id) { %>
                    <div class="validation">
                        <%= errors.category_id.msg %> 
                    </div>
                <% } %>
                <div>
                    <label for="material_id">Materiales: </label>
                    <select name="material_id">
                        <option selected disabled>Elige el material -</option>
                    <% materials.forEach(material => { %>
                        <option value="<%= material.id %>" <%= material.id == product.material_id ? 'selected' : ''; %>><%= material.material %></option>
                    <% }) %>
                    </select><span></span>
                </div>
                <% if (locals.errors && errors.material_id) { %>
                    <div class="validation">
                        <%= errors.material_id.msg %> 
                    </div>
                <% } %>
                <div>
                    <label for="color_id">Colores: </label>
                    <select name="color_id">
                        <option selected disabled>Elige el color -</option>
                    <% colors.forEach(color => { %>
                        <option value="<%= color.id %>" <%= color.id == product.color_id ? 'selected' : ''; %>><%= color.color %></option>
                    <% }) %>
                    </select><span></span>
                </div>
                <% if (locals.errors && errors.color_id) { %>
                    <div class="validation">
                        <%= errors.color_id.msg %> 
                    </div>
                <% } %>
                <div>
                    <label for="size_id">Tallas: </label>
                    <select name="size_id">
                        <option selected disabled>Elige la talla -</option>
                    <% sizes.forEach(size => { %>
                        <option value="<%= size.id %>" <%= size.id == product.size_id ? 'selected' : ''; %>><%= size.size %></option>                                                          
                    <% }) %>
                    </select><span></span>
                </div>
                <% if (locals.errors && errors.size_id) { %>
                    <div class="validation">
                        <%= errors.size_id.msg %> 
                    </div>
                <% } %>
                    
                    <p> <button class="buttonEdit" type="submit">Actualizar</button>

                        <a class="buttonBackProducts" href="/products">Listado de Productos</a>
                    </p>
                </form>
                <form action="/products/<%=product.id%>?_method=DELETE" method="POST">

                    <button type="submit" class="buttonDelete">BORRAR</button>

                </form>
            </section>
            <%- include("partials/footer") %>
        </body>

</html>